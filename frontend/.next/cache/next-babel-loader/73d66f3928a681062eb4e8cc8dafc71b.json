{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/dpisa/Desktop/bossa-box/frontend/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"C:/Users/dpisa/Desktop/bossa-box/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"C:/Users/dpisa/Desktop/bossa-box/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"C:/Users/dpisa/Desktop/bossa-box/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useRef, useState } from \"react\";\nimport styles from \"./Modal.module.css\";\nexport default function Modal(_ref) {\n  var setAddModal = _ref.setAddModal,\n      fetchPosts = _ref.fetchPosts;\n  var tagInput = useRef(null);\n  var initialErrors = {};\n\n  var _useState = useState(initialErrors),\n      errors = _useState[0],\n      setErrors = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      title = _useState2[0],\n      setTitle = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      link = _useState3[0],\n      setLink = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      description = _useState4[0],\n      setDescription = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      tag = _useState5[0],\n      setTag = _useState5[1];\n\n  var _useState6 = useState([]),\n      tags = _useState6[0],\n      setTags = _useState6[1];\n\n  function validateForm() {\n    return _validateForm.apply(this, arguments);\n  }\n\n  function _validateForm() {\n    _validateForm = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var initialErrors;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              initialErrors = {};\n\n              if (title.length === 0) {\n                initialErrors.title = \"Title is required\";\n              }\n\n              if (link.length === 0) {\n                initialErrors.link = \"Link is required\";\n              }\n\n              if (description.length === 0) {\n                initialErrors.description = \"Description is required\";\n              }\n\n              if (tags.length === 0) {\n                initialErrors.tags = \"A Tag is required\";\n              }\n\n              setErrors(initialErrors);\n\n              if (!(Object.keys(initialErrors).length === 0)) {\n                _context.next = 11;\n                break;\n              }\n\n              _context.next = 9;\n              return fetch(\"http://localhost:3000/tools\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  title: title,\n                  link: link,\n                  description: description,\n                  tags: tags\n                })\n              });\n\n            case 9:\n              fetchPosts();\n              handleCloseModal();\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _validateForm.apply(this, arguments);\n  }\n\n  function handleSubmit(_x) {\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  function _handleSubmit() {\n    _handleSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              _context2.next = 3;\n              return validateForm();\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  function handleCloseModal() {\n    setAddModal(false);\n    setTitle(\"\");\n    setDescription(\"\");\n    setLink(\"\");\n    setTag(\"\");\n    setTags([]);\n  }\n\n  function handleAddTag() {\n    var trimTag = tag.trim();\n\n    if (trimTag) {\n      handleFocus();\n      setTags([].concat(_toConsumableArray(tags), [trimTag]));\n      setTag(\"\");\n    }\n\n    return handleFocus();\n  }\n\n  function handleRemoveTag(e) {\n    var result = tags.filter(function (word) {\n      return word != e;\n    });\n    setTags(result);\n  }\n\n  function handleFocus() {\n    tagInput.current.focus();\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: styles.modal,\n    children: /*#__PURE__*/_jsx(\"form\", {\n      onSubmit: handleSubmit,\n      onKeyPress: function onKeyPress(e) {\n        e.key === \"Enter\" && e.preventDefault();\n      },\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.modalBody,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.modalHeader,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.modalHeaderAdd,\n            children: [/*#__PURE__*/_jsxs(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              width: \"61.414\",\n              height: \"61.42\",\n              viewBox: \"0 0 61.414 61.42\",\n              style: {\n                fill: \"none\",\n                stroke: \"#170C3A\",\n                strokeMiterlimit: 10,\n                strokeWidth: \"10px\",\n                transform: \"rotate(45deg)\",\n                width: \"15px\",\n                height: \"15px\"\n              },\n              children: [/*#__PURE__*/_jsx(\"defs\", {}), /*#__PURE__*/_jsx(\"g\", {\n                transform: \"translate(-568.793 -714.793)\",\n                children: /*#__PURE__*/_jsx(\"path\", {\n                  className: \"a\",\n                  d: \"M80,20.005l-60,60m60,0L20,20\",\n                  transform: \"translate(549.501 695.5)\"\n                })\n              })]\n            }), /*#__PURE__*/_jsx(\"h3\", {\n              className: styles.modalTitle,\n              children: \"Add a new tool\"\n            })]\n          }), /*#__PURE__*/_jsxs(\"svg\", {\n            className: styles.closeModal,\n            onClick: handleCloseModal,\n            xmlns: \"http://www.w3.org/2000/svg\",\n            width: \"13.414\",\n            height: \"13.415\",\n            viewBox: \"0 0 13.414 13.415\",\n            style: {\n              fill: \"none\",\n              stroke: \"#8f8a9b\",\n              strokeMiterlimit: 10,\n              strokeWidth: \"2px\"\n            },\n            children: [/*#__PURE__*/_jsx(\"defs\", {}), /*#__PURE__*/_jsx(\"path\", {\n              className: \"a\",\n              d: \"M32,20,20,32m12,0L20,20\",\n              transform: \"translate(-19.292 -19.293)\"\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.modalContent,\n          children: [/*#__PURE__*/_jsxs(\"label\", {\n            className: styles.modalLabel,\n            children: [\"Tool Title \", /*#__PURE__*/_jsx(\"span\", {\n              className: \"\".concat(errors.title && styles.span),\n              children: \"*\"\n            })]\n          }), /*#__PURE__*/_jsx(\"input\", {\n            className: \"\".concat(styles.modalInput, \" \").concat(errors.title && styles.modalInputError),\n            type: \"text\",\n            value: title,\n            onChange: function onChange(e) {\n              setTitle(e.target.value);\n              setErrors(_objectSpread(_objectSpread({}, errors), {}, {\n                title: \"\"\n              }));\n            }\n          }), errors.title && /*#__PURE__*/_jsx(\"p\", {\n            className: styles.modalErrorMessage,\n            children: errors.title\n          }), /*#__PURE__*/_jsxs(\"label\", {\n            className: styles.modalLabel,\n            children: [\"Link \", /*#__PURE__*/_jsx(\"span\", {\n              className: \"\".concat(errors.link && styles.span),\n              children: \"*\"\n            })]\n          }), /*#__PURE__*/_jsx(\"input\", {\n            className: \"\".concat(styles.modalInput, \" \").concat(errors.link && styles.modalInputError),\n            type: \"text\",\n            value: link,\n            onChange: function onChange(e) {\n              setLink(e.target.value);\n              setErrors(_objectSpread(_objectSpread({}, errors), {}, {\n                link: \"\"\n              }));\n            }\n          }), errors.link && /*#__PURE__*/_jsx(\"p\", {\n            className: styles.modalErrorMessage,\n            children: errors.link\n          }), /*#__PURE__*/_jsxs(\"label\", {\n            className: styles.modalLabel,\n            children: [\"Description \", /*#__PURE__*/_jsx(\"span\", {\n              className: \"\".concat(errors.description && styles.span),\n              children: \"*\"\n            })]\n          }), /*#__PURE__*/_jsx(\"textarea\", {\n            className: \"\".concat(styles.modalInputTextArea, \" \").concat(errors.description && styles.modalInputTextAreaError),\n            type: \"text\",\n            value: description,\n            onChange: function onChange(e) {\n              setDescription(e.target.value);\n              setErrors(_objectSpread(_objectSpread({}, errors), {}, {\n                description: \"\"\n              }));\n            }\n          }), errors.description && /*#__PURE__*/_jsx(\"p\", {\n            className: styles.modalErrorMessage,\n            children: errors.description\n          }), /*#__PURE__*/_jsxs(\"label\", {\n            className: styles.modalLabel,\n            children: [\"Tags \", /*#__PURE__*/_jsx(\"span\", {\n              className: \"\".concat(errors.tags && styles.span),\n              children: \"*\"\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.addTags,\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              ref: tagInput,\n              className: \"\".concat(styles.modalInput, \" \").concat(errors.tags && styles.modalInputError),\n              type: \"text\",\n              value: tag,\n              onKeyPress: function onKeyPress(e) {\n                e.key === \"Enter\" && (e.preventDefault(), handleAddTag());\n              },\n              onChange: function onChange(e) {\n                setTag(e.target.value);\n                setErrors(_objectSpread(_objectSpread({}, errors), {}, {\n                  tags: \"\"\n                }));\n              }\n            }), errors.tags && /*#__PURE__*/_jsx(\"p\", {\n              className: styles.modalErrorMessage,\n              children: errors.tags\n            }), /*#__PURE__*/_jsx(\"div\", {\n              onClick: function onClick() {\n                return handleAddTag();\n              },\n              className: styles.addTagField,\n              children: /*#__PURE__*/_jsx(\"svg\", {\n                className: styles.addTag,\n                xmlns: \"http://www.w3.org/2000/svg\",\n                viewBox: \"0 0 61.414 61.42\",\n                children: /*#__PURE__*/_jsx(\"g\", {\n                  transform: \"translate(-568.793 -714.793)\",\n                  children: /*#__PURE__*/_jsx(\"path\", {\n                    className: \"addTag\",\n                    d: \"M80,20.005l-60,60m60,0L20,20\",\n                    transform: \"translate(549.501 695.5)\"\n                  })\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"p\", {\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: styles.tagsContainer,\n                children: tags && tags.map(function (tag) {\n                  return /*#__PURE__*/_jsxs(\"div\", {\n                    className: styles.tag,\n                    value: tag,\n                    onClick: function onClick() {\n                      return handleRemoveTag(tag);\n                    },\n                    children: [/*#__PURE__*/_jsx(\"p\", {\n                      children: tag\n                    }), /*#__PURE__*/_jsxs(\"svg\", {\n                      className: styles.removeTag,\n                      xmlns: \"http://www.w3.org/2000/svg\",\n                      width: \"10\",\n                      height: \"10\",\n                      viewBox: \"0 0 13.414 13.415\",\n                      style: {\n                        fill: \"none\",\n                        stroke: \"#8f8a9b\",\n                        strokeMiterlimit: 10,\n                        strokeWidth: \"2px\"\n                      },\n                      children: [/*#__PURE__*/_jsx(\"defs\", {}), /*#__PURE__*/_jsx(\"path\", {\n                        className: \"a\",\n                        d: \"M32,20,20,32m12,0L20,20\",\n                        transform: \"translate(-19.292 -19.293)\"\n                      })]\n                    })]\n                  });\n                })\n              })\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"footer\", {\n          className: styles.modalFooter,\n          children: [/*#__PURE__*/_jsx(\"button\", {\n            className: styles.cancelButton,\n            onClick: handleCloseModal,\n            children: \"Cancel\"\n          }), /*#__PURE__*/_jsx(\"button\", {\n            className: styles.saveButton,\n            type: \"submit\",\n            value: \"Submit\",\n            children: \"Save\"\n          })]\n        })]\n      })\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}